{{- $isTermux := or (env "TERMUX_VERSION") (lookPath "termux-info") -}}
{{- $isRpi := false -}}
{{- if and (eq .chezmoi.os "linux") (not $isTermux) -}}
{{-   if stat "/proc/device-tree/model" -}}
{{-     $isRpi = true -}}
{{-   end -}}
{{- end -}}
{{- $machineType := "" -}}
{{- if $isTermux -}}
{{-   $machineType = "termux" -}}
{{- else if $isRpi -}}
{{-   $machineType = "server" -}}
{{- else -}}
{{-   $machineType = promptChoiceOnce . "machineType" "Machine type" (list "desktop" "server" "hpc") -}}
{{- end -}}
{{- $machineName := promptChoiceOnce . "machineName" "Machine name" (list "Manifold" "Tensor" "Matrix" "Hessian" "Jacobian" "Vector") }}

data:
  machineType: {{ $machineType | quote }}
  machineName: {{ $machineName | quote }}
  isTermux: {{ $isTermux }}
  isRpi: {{ $isRpi }}
  isHpc: {{ eq $machineType "hpc" }}
